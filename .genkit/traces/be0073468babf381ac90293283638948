{"traceId":"be0073468babf381ac90293283638948","spans":{"d27aea875eaf16fd":{"spanId":"d27aea875eaf16fd","traceId":"be0073468babf381ac90293283638948","parentSpanId":"63cc465ff2645ed0","startTime":1754252950963,"endTime":1754252951386.9106,"attributes":{"next.span_name":"fetch POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent","next.span_type":"AppRender.fetch","http.url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent","http.method":"POST","net.peer.name":"generativelanguage.googleapis.com"},"displayName":"fetch POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent","links":[],"instrumentationLibrary":{"name":"next.js","version":"0.0.1"},"spanKind":"CLIENT","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"63cc465ff2645ed0":{"spanId":"63cc465ff2645ed0","traceId":"be0073468babf381ac90293283638948","parentSpanId":"b5efdd34f9dbdb9e","startTime":1754252950962,"endTime":1754252951396.7397,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"googleai/gemini-2.5-flash-lite-preview-06-17","genkit:path":"/{GenerateNpcResponse,t:flow}/{generate,t:util}/{googleai/gemini-2.5-flash-lite-preview-06-17,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"system\",\"content\":[{\"text\":\"You are playing a role-playing game with the user. Your character is described in the attached Markdown file. Make sure to carefully take into account your character description.\\n\\nYour task is to have a natural conversation with the user while staying in-character.\"},{\"media\":{\"url\":\"data:text/markdown;base64,IyBSb2xlLVBsYXlpbmcgR2FtZSBDaGFyYWN0ZXIgSW5mb3JtYXRpb24KCllvdSBhcmUgcm9sZS1wbGF5aW5nIGFzIHRoZSBjaGFyYWN0ZXIgIkJlbm55Ii4KCllvdXIgbW9vZCBpczogbmV1dHJhbC4KCllvdSBrbm93IHRoZSBmb2xsb3dpbmcgZmFjdHM6CiAgLSBJIGtub3cgdGhlIGJlc3QgcmVjaXBlIGZvciBwaXp6YS4=\"}}]},{\"role\":\"user\",\"content\":[{\"text\":\"hello, nice to meet you\"}]}],\"config\":{},\"tools\":[],\"output\":{}}","genkit:state":"error","genkit:isFailureSource":true},"displayName":"googleai/gemini-2.5-flash-lite-preview-06-17","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction."},"timeEvents":{"timeEvent":[{"time":1754252951396.6113,"annotation":{"attributes":{"exception.type":"Error","exception.message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction.","exception.stacktrace":"Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction.\n    at handleResponseNotOk (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23389:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async makeRequest (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23361:9)\n    at async generateContent (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23803:22)\n    at async ChatSession.sendMessage (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:24173:9)\n    at async callGemini (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:22099:32)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:22144:14\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1825:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1745:41\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1040:20\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async newTrace (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1033:12)\n    at async actionFn.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1708:30)\n    at async dispatch (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1652:32)\n    at async wrapped.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1667:21)\n    at async wrapped (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1644:17)\n    at async dispatch (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4140:20)\n    at async generate (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4148:27)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4033:24\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async generateHelper (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4023:12)\n    at async generate (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4762:22)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:870:22\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:2456:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1825:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1745:41\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1040:20\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async newTrace (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1033:12)\n    at async actionFn.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1708:30)\n    at async Module.actionFn (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1694:25)\n    at async Object.generateActions (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:970:37)\n    at async Server.actInst (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:391:25)\n    at async endpoint (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:1001:12)\n    at async executeActionAndPrepareForRender (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:33:4432)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:33:2264\n    at async handleAction (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:32:23711)\n    at async renderToHTMLOrFlightImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:38:30115)\n    at async doRender (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2423:28)\n    at async AppPageRouteModule.handleResponse (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:40:57928)\n    at async handleResponse (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2569:32)\n    at async handler (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2946:20)\n    at async doRender (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1587:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1929:13)\n    at async DevServer.renderPageComponent (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:2395:24)\n    at async DevServer.renderToResponseImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:2435:32)\n    at async DevServer.pipeImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1035:25)"},"description":"exception"}}]}},"b5efdd34f9dbdb9e":{"spanId":"b5efdd34f9dbdb9e","traceId":"be0073468babf381ac90293283638948","parentSpanId":"e86919fdf52d1279","startTime":1754252950940,"endTime":1754252951398.297,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{GenerateNpcResponse,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"googleai/gemini-2.5-flash-lite-preview-06-17\",\"messages\":[{\"role\":\"system\",\"content\":[{\"text\":\"You are playing a role-playing game with the user. Your character is described in the attached Markdown file. Make sure to carefully take into account your character description.\\n\\nYour task is to have a natural conversation with the user while staying in-character.\"},{\"media\":{\"url\":\"data:text/markdown;base64,IyBSb2xlLVBsYXlpbmcgR2FtZSBDaGFyYWN0ZXIgSW5mb3JtYXRpb24KCllvdSBhcmUgcm9sZS1wbGF5aW5nIGFzIHRoZSBjaGFyYWN0ZXIgIkJlbm55Ii4KCllvdXIgbW9vZCBpczogbmV1dHJhbC4KCllvdSBrbm93IHRoZSBmb2xsb3dpbmcgZmFjdHM6CiAgLSBJIGtub3cgdGhlIGJlc3QgcmVjaXBlIGZvciBwaXp6YS4=\"}}]},{\"role\":\"user\",\"content\":[{\"text\":\"hello, nice to meet you\"}]}],\"config\":{}}","genkit:state":"error"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction."},"timeEvents":{"timeEvent":[{"time":1754252951398.1238,"annotation":{"attributes":{"exception.type":"Error","exception.message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction.","exception.stacktrace":"Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction.\n    at handleResponseNotOk (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23389:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async makeRequest (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23361:9)\n    at async generateContent (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23803:22)\n    at async ChatSession.sendMessage (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:24173:9)\n    at async callGemini (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:22099:32)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:22144:14\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1825:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1745:41\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1040:20\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async newTrace (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1033:12)\n    at async actionFn.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1708:30)\n    at async dispatch (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1652:32)\n    at async wrapped.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1667:21)\n    at async wrapped (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1644:17)\n    at async dispatch (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4140:20)\n    at async generate (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4148:27)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4033:24\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async generateHelper (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4023:12)\n    at async generate (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4762:22)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:870:22\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:2456:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1825:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1745:41\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1040:20\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async newTrace (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1033:12)\n    at async actionFn.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1708:30)\n    at async Module.actionFn (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1694:25)\n    at async Object.generateActions (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:970:37)\n    at async Server.actInst (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:391:25)\n    at async endpoint (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:1001:12)\n    at async executeActionAndPrepareForRender (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:33:4432)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:33:2264\n    at async handleAction (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:32:23711)\n    at async renderToHTMLOrFlightImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:38:30115)\n    at async doRender (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2423:28)\n    at async AppPageRouteModule.handleResponse (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:40:57928)\n    at async handleResponse (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2569:32)\n    at async handler (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2946:20)\n    at async doRender (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1587:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1929:13)\n    at async DevServer.renderPageComponent (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:2395:24)\n    at async DevServer.renderToResponseImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:2435:32)\n    at async DevServer.pipeImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1035:25)"},"description":"exception"}}]}},"e86919fdf52d1279":{"spanId":"e86919fdf52d1279","traceId":"be0073468babf381ac90293283638948","startTime":1754252950938,"endTime":1754252951398.6624,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"GenerateNpcResponse","genkit:isRoot":true,"genkit:path":"/{GenerateNpcResponse,t:flow}","genkit:input":"{\"state\":{\"turns\":[],\"currentId\":\"node1\",\"convoTree\":{\"root\":\"node1\",\"nodes\":{\"node1\":{\"id\":\"node1\"}},\"edges\":{}},\"npcState\":{\"name\":\"Benny\",\"description\":\"Benny is a professional chef with a passion for cooking.\",\"facts\":[\"I know the best recipe for pizza.\"],\"mood\":\"neutral\"}},\"prompt\":\"hello, nice to meet you\"}","genkit:state":"error"},"displayName":"GenerateNpcResponse","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":2,"message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction."},"timeEvents":{"timeEvent":[{"time":1754252951398.6313,"annotation":{"attributes":{"exception.type":"Error","exception.message":"[GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction.","exception.stacktrace":"Error: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-06-17:generateContent: [400 Bad Request] Only text is supported in the system instruction.\n    at handleResponseNotOk (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23389:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async makeRequest (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23361:9)\n    at async generateContent (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:23803:22)\n    at async ChatSession.sendMessage (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:24173:9)\n    at async callGemini (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:22099:32)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_24d911f3._.js:22144:14\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1825:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1745:41\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1040:20\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async newTrace (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1033:12)\n    at async actionFn.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1708:30)\n    at async dispatch (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1652:32)\n    at async wrapped.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1667:21)\n    at async wrapped (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1644:17)\n    at async dispatch (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4140:20)\n    at async generate (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4148:27)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4033:24\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async generateHelper (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4023:12)\n    at async generate (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_ai_lib_836f0c81._.js:4762:22)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:870:22\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:2456:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1825:16\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1745:41\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1040:20\n    at async /Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1057:28\n    at async runInNewSpan (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1050:12)\n    at async newTrace (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1033:12)\n    at async actionFn.run (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1708:30)\n    at async Module.actionFn (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_@genkit-ai_core_lib_b4b8dea8._.js:1694:25)\n    at async Object.generateActions (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:970:37)\n    at async Server.actInst (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:391:25)\n    at async endpoint (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/[root-of-the-server]__4da0a156._.js:1001:12)\n    at async executeActionAndPrepareForRender (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:33:4432)\n    at async /Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:33:2264\n    at async handleAction (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:32:23711)\n    at async renderToHTMLOrFlightImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:38:30115)\n    at async doRender (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2423:28)\n    at async AppPageRouteModule.handleResponse (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js:40:57928)\n    at async handleResponse (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2569:32)\n    at async handler (/Users/henryblanchette/Documents/small-language-games-v2/.next/server/chunks/ssr/node_modules_next_dist_e9e5531b._.js:2946:20)\n    at async doRender (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1587:34)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1929:13)\n    at async DevServer.renderPageComponent (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:2395:24)\n    at async DevServer.renderToResponseImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:2435:32)\n    at async DevServer.pipeImpl (/Users/henryblanchette/Documents/small-language-games-v2/node_modules/next/dist/server/base-server.js:1035:25)"},"description":"exception"}}]}}},"displayName":"GenerateNpcResponse","startTime":1754252950938,"endTime":1754252951398.6624}